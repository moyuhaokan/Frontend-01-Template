# 每周总结可以写在这里

有限状态机



有限状态机是一种编程思想



- 每一种状态都是一个机器

- 每一个机器知道下一个状态

  - 每个机器都有确定的下一个状态（Moore）

  - 每个机器根据输入决定下一个状态（Mealy）

    

    

**简单的 HTML 解析**

第一步： 拆分文件

为了方便文件管理，把 parse 单独拆分到文件中

parse 接受 HTML 文本作为参数，返回一颗 DOM 树



第二步：创建状态机

使用 FSM 实现 HTML 分析

在 HTML 标签中，已经规定了 HTML 的状态



第三步 解析标签

主要标签有： 开始标签，结束标签和自封闭标签



第四步 创建元素

在状态机中，除了状态迁移，我们还要加入业务逻辑

在标签结束状态提交标签 token



第五步： 处理属性



属性值分为单引号，双引号，无引号三种写法，因此需要较多状态处理

处理属性的方式和标签类似

属性结束时，把属性加到标签 token 上





第六步： 构建 DOM 树



从标签构建 DOM 树的基本技巧是使用栈

从遇到开始标签时创建元素并入栈，遇到接受标签的时候出栈

自封闭标签可以视为入栈后立即出栈

任何圆的额父元素是它入栈钱的栈顶



第七步 处理文本节点



文本节点和自封闭标签处理类似

多个文本节点需要合并



**CSS computing**



1.收集 css规则

2.添加调用

3.获取父元素序列

4.拆分选择器

5.计算选择器与元素匹配

6.生成 computed 属性

7.确定规则覆盖关系



